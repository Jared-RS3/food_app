# ðŸŽ¨ Visual System Overview

## System Architecture Diagram

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         CLIENT (Browser/Mobile)                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”             â”‚
â”‚  â”‚   Next.js    â”‚  â”‚   React      â”‚  â”‚  OneSignal   â”‚             â”‚
â”‚  â”‚   Frontend   â”‚  â”‚  Components  â”‚  â”‚   Web SDK    â”‚             â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                 â”‚ HTTPS
                                 â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    VERCEL EDGE NETWORK (CDN)                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”             â”‚
â”‚  â”‚  Middleware  â”‚  â”‚ Static Files â”‚  â”‚   Next.js    â”‚             â”‚
â”‚  â”‚  (Auth Check)â”‚  â”‚   (Images)   â”‚  â”‚  Functions   â”‚             â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                 â”‚
         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
         â”‚                       â”‚                       â”‚
         â–¼                       â–¼                       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   SUPABASE      â”‚    â”‚  UPSTASH REDIS  â”‚    â”‚   CLOUDINARY    â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚    â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚    â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚   â”‚PostgreSQLâ”‚   â”‚    â”‚   â”‚  Cache  â”‚   â”‚    â”‚   â”‚  Image  â”‚   â”‚
â”‚   â”‚   +RLS   â”‚   â”‚    â”‚   â”‚  Layer  â”‚   â”‚    â”‚   â”‚   CDN   â”‚   â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚    â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚    â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚    â”‚                 â”‚    â”‚                 â”‚
â”‚   â”‚  Auth   â”‚   â”‚    â”‚   5min - 1hr    â”‚    â”‚  WebP/AVIF      â”‚
â”‚   â”‚  JWT    â”‚   â”‚    â”‚     TTL         â”‚    â”‚  Optimized      â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚   â”‚ Storage â”‚   â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â”‚ Webhooks
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚     STRIPE      â”‚    â”‚    ONESIGNAL    â”‚    â”‚     SENTRY      â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚    â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚    â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚   â”‚ Checkoutâ”‚   â”‚    â”‚   â”‚  Push   â”‚   â”‚    â”‚   â”‚  Error  â”‚   â”‚
â”‚   â”‚ Session â”‚   â”‚    â”‚   â”‚Notific. â”‚   â”‚    â”‚   â”‚Tracking â”‚   â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚    â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚    â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚    â”‚                 â”‚    â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚   â”‚Webhooks â”‚   â”‚    â”‚   iOS/Android   â”‚    â”‚   â”‚  APM    â”‚   â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚    â”‚   Web Push      â”‚    â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Request Flow Diagrams

### 1. User Registration Flow

```
User fills form
    â†“
POST /auth/signup
    â†“
Supabase Auth.signUp()
    â†“
Create user in auth.users
    â†“
Trigger: on_auth_user_created
    â†“
Insert into user_profiles
    â†“
Return JWT token
    â†“
Set secure cookie
    â†“
Redirect to /onboarding
```

### 2. Restaurant List Flow (With Cache)

```
GET /api/restaurants?city=Cape Town
    â†“
Middleware: Check auth âœ“
    â†“
API Route Handler
    â†“
restaurantService.getRestaurants()
    â†“
Check Redis cache
    â”œâ”€ HIT â†’ Return data (50ms) âœ“
    â””â”€ MISS â†“
Query Supabase
    â†“
Apply RLS filters
    â†“
Return 20 restaurants
    â†“
Cache for 15 minutes
    â†“
Return to client
```

### 3. Order Creation Flow

```
User clicks "Place Order"
    â†“
POST /api/orders/create
    â†“
Validate auth token
    â†“
Validate request body (Zod)
    â†“
Calculate totals
    â”œâ”€ Subtotal
    â”œâ”€ Delivery fee
    â”œâ”€ Tax (15%)
    â””â”€ Total
    â†“
Insert into orders table
    â†“
Insert order_items (bulk)
    â†“
Create Stripe PaymentIntent
    â†“
Return {order, clientSecret}
    â†“
Client confirms payment
    â†“
Stripe webhook fires
    â†“
Update order.payment_status = 'paid'
    â†“
Update order.status = 'confirmed'
    â†“
Send push notification
    â†“
User sees "Order Confirmed! ðŸŽ‰"
```

### 4. Order Status Update Flow

```
Restaurant clicks "Mark as Ready"
    â†“
PUT /api/orders/update
    â†“
Check admin/owner auth
    â†“
Update order.status = 'ready'
    â†“
Trigger: update_updated_at()
    â†“
Get user_id from order
    â†“
Send OneSignal notification
    â”œâ”€ Title: "Order Ready! ðŸ½ï¸"
    â””â”€ Message: "Your order from {restaurant} is ready"
    â†“
User device receives push
    â†“
User taps notification
    â†“
Opens /orders/{orderId}
```

---

## Database Entity Relationships

```
user_profiles (1) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ (M) orders
     â”‚                            â”‚
     â”‚ (owner)                    â”‚
     â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ (M) restaurants â”‚
     â”‚                 â”‚          â”‚
     â”‚                 â”‚          â”‚
     â”‚                 â”‚ (M) order_items (M)
     â”‚                 â”‚          â”‚
     â”‚                 â”‚          â”‚
     â”‚            (M) menu_items â”€â”˜
     â”‚                 â”‚
     â”‚                 â”‚
     â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ (M) reviews
     â”‚                 â”‚
     â”‚                 â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
     â”‚
     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ (M) favorites
                       â”‚
                       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ restaurants
```

---

## Caching Strategy Visual

```
Request: GET /restaurants?cuisine=Italian
    â”‚
    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  1. Check Redis                        â”‚
â”‚     Key: "restaurants:list:cuisine:    â”‚
â”‚           Italian:page:1"              â”‚
â”‚                                        â”‚
â”‚  Cache HIT? â”€â”€YESâ†’ Return (50ms) âœ“    â”‚
â”‚     â”‚                                  â”‚
â”‚     NO                                 â”‚
â””â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
      â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  2. Query Supabase                     â”‚
â”‚     SELECT * FROM restaurants          â”‚
â”‚     WHERE cuisine_type = 'Italian'     â”‚
â”‚     AND is_active = true               â”‚
â”‚     ORDER BY rating DESC               â”‚
â”‚     LIMIT 20                           â”‚
â”‚                                        â”‚
â”‚  Time: 100-150ms                       â”‚
â””â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
      â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  3. Cache Result                       â”‚
â”‚     redis.setex(key, 900, data)        â”‚
â”‚     TTL: 15 minutes                    â”‚
â””â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
      â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  4. Return to Client                   â”‚
â”‚     Status: 200                        â”‚
â”‚     Total time: 100-150ms (first)      â”‚
â”‚                 50ms (cached)          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Cache Hit Rate Target: >80%
```

---

## Payment Flow Visualization

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  USER   â”‚         â”‚  API    â”‚         â”‚ STRIPE  â”‚
â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜         â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜         â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜
     â”‚                   â”‚                   â”‚
     â”‚ 1. Place Order    â”‚                   â”‚
     â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚                   â”‚
     â”‚                   â”‚                   â”‚
     â”‚                   â”‚ 2. Create Order   â”‚
     â”‚                   â”‚    (DB)           â”‚
     â”‚                   â”‚                   â”‚
     â”‚                   â”‚ 3. Create Payment â”‚
     â”‚                   â”‚    Intent         â”‚
     â”‚                   â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚
     â”‚                   â”‚                   â”‚
     â”‚                   â”‚ 4. clientSecret   â”‚
     â”‚                   â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
     â”‚                   â”‚                   â”‚
     â”‚ 5. {order,secret} â”‚                   â”‚
     â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                   â”‚
     â”‚                   â”‚                   â”‚
     â”‚ 6. Confirm Paymentâ”‚                   â”‚
     â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚
     â”‚                   â”‚                   â”‚
     â”‚                   â”‚                   â”‚
     â”‚                   â”‚ 7. Webhook:       â”‚
     â”‚                   â”‚    payment_successâ”‚
     â”‚                   â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
     â”‚                   â”‚                   â”‚
     â”‚                   â”‚ 8. Update Order   â”‚
     â”‚                   â”‚    status='paid'  â”‚
     â”‚                   â”‚                   â”‚
     â”‚ 9. Push Notif.    â”‚                   â”‚
     â”‚ "Order Confirmed!"â”‚                   â”‚
     â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                   â”‚
     â”‚                   â”‚                   â”‚
```

---

## File Organization Map

```
production-app/
â”‚
â”œâ”€â”€ ðŸ”§ Config (Root Level)
â”‚   â”œâ”€â”€ package.json ........... Dependencies
â”‚   â”œâ”€â”€ tsconfig.json .......... TypeScript
â”‚   â”œâ”€â”€ next.config.js ......... Next.js + Sentry
â”‚   â”œâ”€â”€ middleware.ts .......... Route protection
â”‚   â””â”€â”€ .env.example ........... Environment template
â”‚
â”œâ”€â”€ ðŸ“Š Database
â”‚   â”œâ”€â”€ types/
â”‚   â”‚   â””â”€â”€ database.ts ........ Generated types
â”‚   â””â”€â”€ supabase/migrations/
â”‚       â””â”€â”€ 001_initial.sql .... Schema + RLS
â”‚
â”œâ”€â”€ ðŸ”Œ Integrations (/lib)
â”‚   â”œâ”€â”€ supabase/ .............. Auth + Database
â”‚   â”œâ”€â”€ redis/ ................. Caching
â”‚   â”œâ”€â”€ cloudinary/ ............ Images
â”‚   â”œâ”€â”€ stripe/ ................ Payments
â”‚   â”œâ”€â”€ onesignal/ ............. Push notifications
â”‚   â””â”€â”€ sentry/ ................ Error monitoring
â”‚
â”œâ”€â”€ ðŸ’¼ Business Logic (/services)
â”‚   â”œâ”€â”€ restaurantService.ts ... CRUD + search
â”‚   â””â”€â”€ orderService.ts ........ Order management
â”‚
â”œâ”€â”€ ðŸŒ API Routes (/app/api)
â”‚   â”œâ”€â”€ orders/create .......... POST new order
â”‚   â”œâ”€â”€ orders/update .......... PUT status
â”‚   â””â”€â”€ webhooks/stripe ........ Payment events
â”‚
â”œâ”€â”€ â° Background Jobs (/server)
â”‚   â””â”€â”€ cron/
â”‚       â”œâ”€â”€ clean-carts ........ Daily cleanup
â”‚       â”œâ”€â”€ send-promos ........ Daily notifications
â”‚       â””â”€â”€ refresh-cache ...... Every 6 hours
â”‚
â””â”€â”€ ðŸ“š Documentation
    â”œâ”€â”€ README.md .............. Overview
    â”œâ”€â”€ ARCHITECTURE.md ........ Deep dive
    â”œâ”€â”€ DEPLOYMENT.md .......... Setup guide
    â”œâ”€â”€ SUMMARY.md ............. What's included
    â”œâ”€â”€ QUICKREF.md ............ Cheat sheet
    â””â”€â”€ VISUAL.md .............. This file
```

---

## Technology Stack Layers

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         PRESENTATION LAYER                  â”‚
â”‚  Next.js 14 Â· React 18 Â· TypeScript        â”‚
â”‚  Server Components Â· Client Components      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                 â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚           API LAYER                         â”‚
â”‚  Route Handlers Â· Server Actions           â”‚
â”‚  Input Validation (Zod) Â· Auth Checks      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                 â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚        SERVICE LAYER                        â”‚
â”‚  restaurantService Â· orderService           â”‚
â”‚  Business Logic Â· Data Transformation       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                 â”‚
         â”Œâ”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
         â”‚                â”‚            â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  DATA LAYER   â”‚ â”‚ CACHE LAYERâ”‚ â”‚ MEDIA LAYERâ”‚
â”‚   Supabase    â”‚ â”‚   Upstash  â”‚ â”‚ Cloudinary â”‚
â”‚   PostgreSQL  â”‚ â”‚   Redis    â”‚ â”‚    CDN     â”‚
â”‚     +RLS      â”‚ â”‚            â”‚ â”‚            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚                â”‚            â”‚
         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                       â”‚
         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
         â”‚             â”‚             â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   PAYMENTS    â”‚ â”‚NOTIFICATIONâ”‚â”‚ MONITORING â”‚
â”‚    Stripe     â”‚ â”‚ OneSignal  â”‚ â”‚   Sentry   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Performance Metrics Dashboard (Target)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ RESPONSE TIMES â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                 â”‚
â”‚  API Endpoints (with cache)                    â”‚
â”‚  â–“â–“â–“â–“â–“â–“â–“â–“â–“â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘  35ms  âœ“          â”‚
â”‚                                                 â”‚
â”‚  API Endpoints (without cache)                 â”‚
â”‚  â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–‘â–‘â–‘â–‘â–‘â–‘â–‘  180ms âœ“          â”‚
â”‚                                                 â”‚
â”‚  Database Queries                              â”‚
â”‚  â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘  95ms  âœ“          â”‚
â”‚                                                 â”‚
â”‚  Image Load (CDN)                              â”‚
â”‚  â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘  320ms âœ“          â”‚
â”‚                                                 â”‚
â”‚  Full Page Load                                â”‚
â”‚  â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–‘â–‘â–‘â–‘  1.2s  âœ“          â”‚
â”‚                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ CACHE HIT RATES â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                 â”‚
â”‚  Restaurant Lists                              â”‚
â”‚  â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ  87%  âœ“              â”‚
â”‚                                                 â”‚
â”‚  Menu Items                                    â”‚
â”‚  â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ    82%  âœ“              â”‚
â”‚                                                 â”‚
â”‚  Search Results                                â”‚
â”‚  â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ       75%  âœ“              â”‚
â”‚                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ SYSTEM HEALTH â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                 â”‚
â”‚  Error Rate:        0.08% âœ“                    â”‚
â”‚  Uptime:           99.97% âœ“                    â”‚
â”‚  Active Users:     1,234  âœ“                    â”‚
â”‚  Orders Today:       156  âœ“                    â”‚
â”‚  Cache Memory:      78MB  âœ“                    â”‚
â”‚  DB Connections:     12   âœ“                    â”‚
â”‚                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Deployment Pipeline

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         DEVELOPMENT                             â”‚
â”‚  Local: npm run dev                            â”‚
â”‚  Supabase: supabase start (local)              â”‚
â”‚  Stripe: stripe listen (webhooks)              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                   â”‚
                   â”‚ git push
                   â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         GITHUB                                  â”‚
â”‚  Source Control                                â”‚
â”‚  Auto-trigger on push                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                   â”‚
                   â”‚ webhook
                   â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         VERCEL BUILD                            â”‚
â”‚  1. Install dependencies                       â”‚
â”‚  2. Run type check                             â”‚
â”‚  3. Build Next.js                              â”‚
â”‚  4. Generate static pages                      â”‚
â”‚  5. Upload to CDN                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                   â”‚
                   â”‚ deploy
                   â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         PRODUCTION                              â”‚
â”‚  âœ“ Serverless functions deployed               â”‚
â”‚  âœ“ Static assets on CDN                        â”‚
â”‚  âœ“ Environment variables set                   â”‚
â”‚  âœ“ Cron jobs scheduled                         â”‚
â”‚  âœ“ SSL certificate active                      â”‚
â”‚  âœ“ Custom domain configured                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                   â”‚
                   â”‚ monitor
                   â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         MONITORING                              â”‚
â”‚  Sentry: Error tracking                        â”‚
â”‚  Vercel: Performance metrics                   â”‚
â”‚  Upstash: Cache analytics                      â”‚
â”‚  Supabase: Database monitoring                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Cost Breakdown (Monthly)

```
â”Œâ”€â”€â”€â”€ INFRASTRUCTURE COSTS (< 1000 users) â”€â”€â”€â”€â”
â”‚                                              â”‚
â”‚  Vercel (Hobby)            $0/mo      â–ˆâ–ˆ    â”‚
â”‚  Supabase (Free)           $0/mo      â–ˆâ–ˆ    â”‚
â”‚  Upstash Redis (Free)      $0/mo      â–ˆâ–ˆ    â”‚
â”‚  Cloudinary (Free)         $0/mo      â–ˆâ–ˆ    â”‚
â”‚  OneSignal (Free)          $0/mo      â–ˆâ–ˆ    â”‚
â”‚  Sentry (Free)             $0/mo      â–ˆâ–ˆ    â”‚
â”‚  Stripe (per transaction)  2.9% + 30Â¢ â–ˆâ–ˆâ–ˆâ–ˆ  â”‚
â”‚                                              â”‚
â”‚  TOTAL FIXED COSTS:        $0/mo            â”‚
â”‚  Variable: Only on transactions             â”‚
â”‚                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€ SCALING COSTS (10K users) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                              â”‚
â”‚  Vercel Pro               $20/mo     â–ˆâ–ˆâ–ˆâ–ˆ    â”‚
â”‚  Supabase Pro             $25/mo     â–ˆâ–ˆâ–ˆâ–ˆâ–ˆ   â”‚
â”‚  Upstash Pro              $10/mo     â–ˆâ–ˆâ–ˆ     â”‚
â”‚  Cloudinary               $89/mo     â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ  â”‚
â”‚  OneSignal (10K users)     $0/mo     â–ˆâ–ˆ      â”‚
â”‚  Sentry Team              $26/mo     â–ˆâ–ˆâ–ˆâ–ˆâ–ˆ   â”‚
â”‚  Stripe (transactions)     2.9% + 30Â¢ â–ˆâ–ˆâ–ˆâ–ˆ   â”‚
â”‚                                              â”‚
â”‚  TOTAL FIXED COSTS:      ~$170/mo           â”‚
â”‚                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

**This visual guide complements the technical documentation. Refer back anytime! ðŸ“Š**
